# EC2 Security Groups

**Security Group Name - sg-02909c0c9fb1ace0e**

To create security groups, run the following in `aws-shell`

```bash
aws> ec2 create-security-group --group-name deepu_SG_useast1 --description "Security Group for deepu on us-east-1"
```
And here is the output
```
-------------------------------------
|        CreateSecurityGroup        |
+----------+------------------------+
|  GroupId |  sg-02909c0c9fb1ace0e  |
+----------+------------------------+
```

To add ingress rule ffor SSH and HTTP
```bash
aws> ec2 authorize-security-group-ingress --group-id sg-02909c0c9fb1ace0e --protocol tcp --port 22 --cidr 0.0.0.0/0
```
```bash
aws> ec2 authorize-security-group-ingress --group-id sg-02909c0c9fb1ace0e --protocol tcp --port 80 --cidr 0.0.0.0/0
```

To add ingress rule for PostgreSQL and Redis
```bash
aws> ec2 authorize-security-group-ingress --group-id sg-02909c0c9fb1ace0e --protocol tcp --port 5432 --cidr 0.0.0.0/0 --source-group sg-02909c0c9fb1ace0e
```
```bash
aws> ec2 authorize-security-group-ingress --group-id sg-02909c0c9fb1ace0e --protocol tcp --port 6379 --cidr 0.0.0.0/0 --source-group sg-02909c0c9fb1ace0e
```

To display security groups

```bash
aws> ec2 describe-security-groups --group-id sg-02909c0c9fb1ace0e
```

And here is the output
```
-------------------------------------------------------------------------------------------------------------------------
|                                                DescribeSecurityGroups                                                 |
+-----------------------------------------------------------------------------------------------------------------------+
||                                                   SecurityGroups                                                    ||
|+----------------------------------------+-----------------------+-------------------+---------------+----------------+|
||               Description              |        GroupId        |     GroupName     |    OwnerId    |     VpcId      ||
|+----------------------------------------+-----------------------+-------------------+---------------+----------------+|
||  Security Group for deepu on us-east-1 |  sg-02909c0c9fb1ace0e |  deepu_SG_useast1 |  289503391411 |  vpc-8954fcf3  ||
|+----------------------------------------+-----------------------+-------------------+---------------+----------------+|
|||                                                   IpPermissions                                                   |||
||+-------------------------------------+---------------------------------------------+-------------------------------+||
|||              FromPort               |                 IpProtocol                  |            ToPort             |||
||+-------------------------------------+---------------------------------------------+-------------------------------+||
|||  80                                 |  tcp                                        |  80                           |||
||+-------------------------------------+---------------------------------------------+-------------------------------+||
||||                                                    IpRanges                                                     ||||
|||+-----------------------------------------------------------------------------------------------------------------+|||
||||                                                     CidrIp                                                      ||||
|||+-----------------------------------------------------------------------------------------------------------------+|||
||||  0.0.0.0/0                                                                                                      ||||
|||+-----------------------------------------------------------------------------------------------------------------+|||
|||                                                   IpPermissions                                                   |||
||+-------------------------------------+---------------------------------------------+-------------------------------+||
|||              FromPort               |                 IpProtocol                  |            ToPort             |||
||+-------------------------------------+---------------------------------------------+-------------------------------+||
|||  5432                               |  tcp                                        |  5432                         |||
||+-------------------------------------+---------------------------------------------+-------------------------------+||
||||                                                    IpRanges                                                     ||||
|||+-----------------------------------------------------------------------------------------------------------------+|||
||||                                                     CidrIp                                                      ||||
|||+-----------------------------------------------------------------------------------------------------------------+|||
||||  0.0.0.0/0                                                                                                      ||||
|||+-----------------------------------------------------------------------------------------------------------------+|||
||||                                                UserIdGroupPairs                                                 ||||
|||+-------------------------------------------------------------------+---------------------------------------------+|||
||||                              GroupId                              |                   UserId                    ||||
|||+-------------------------------------------------------------------+---------------------------------------------+|||
||||  sg-02909c0c9fb1ace0e                                             |  289503391411                               ||||
|||+-------------------------------------------------------------------+---------------------------------------------+|||
|||                                                   IpPermissions                                                   |||
||+-------------------------------------+---------------------------------------------+-------------------------------+||
|||              FromPort               |                 IpProtocol                  |            ToPort             |||
||+-------------------------------------+---------------------------------------------+-------------------------------+||
|||  22                                 |  tcp                                        |  22                           |||
||+-------------------------------------+---------------------------------------------+-------------------------------+||
||||                                                    IpRanges                                                     ||||
|||+-----------------------------------------------------------------------------------------------------------------+|||
||||                                                     CidrIp                                                      ||||
|||+-----------------------------------------------------------------------------------------------------------------+|||
||||  0.0.0.0/0                                                                                                      ||||
|||+-----------------------------------------------------------------------------------------------------------------+|||
|||                                                   IpPermissions                                                   |||
||+-------------------------------------+---------------------------------------------+-------------------------------+||
|||              FromPort               |                 IpProtocol                  |            ToPort             |||
||+-------------------------------------+---------------------------------------------+-------------------------------+||
|||  6379                               |  tcp                                        |  6379                         |||
||+-------------------------------------+---------------------------------------------+-------------------------------+||
||||                                                    IpRanges                                                     ||||
|||+-----------------------------------------------------------------------------------------------------------------+|||
||||                                                     CidrIp                                                      ||||
|||+-----------------------------------------------------------------------------------------------------------------+|||
||||  0.0.0.0/0                                                                                                      ||||
|||+-----------------------------------------------------------------------------------------------------------------+|||
||||                                                UserIdGroupPairs                                                 ||||
|||+-------------------------------------------------------------------+---------------------------------------------+|||
||||                              GroupId                              |                   UserId                    ||||
|||+-------------------------------------------------------------------+---------------------------------------------+|||
||||  sg-02909c0c9fb1ace0e                                             |  289503391411                               ||||
|||+-------------------------------------------------------------------+---------------------------------------------+|||
|||                                                IpPermissionsEgress                                                |||
||+-------------------------------------------------------------------------------------------------------------------+||
|||                                                    IpProtocol                                                     |||
||+-------------------------------------------------------------------------------------------------------------------+||
|||  -1                                                                                                               |||
||+-------------------------------------------------------------------------------------------------------------------+||
||||                                                    IpRanges                                                     ||||
|||+-----------------------------------------------------------------------------------------------------------------+|||
||||                                                     CidrIp                                                      ||||
|||+-----------------------------------------------------------------------------------------------------------------+|||
||||  0.0.0.0/0                                                                                                      ||||
|||+-----------------------------------------------------------------------------------------------------------------+|||
```

To delete a security group
```bash
aws> ec2 delete-security-group --group-id sg-02909c0c9fb1ace0e
```